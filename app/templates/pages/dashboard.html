{% extends "base.html" %}
{% block content %}

  <div class="admin-container">

    <div class="resource-list">
      
      <h2>Current Resources</h2><br>

      {% if msg %}
        <p class="alert alert-success">{{ msg }}</p><br>
      {% endif %}

      {% if resources|length > 0 %}
        <p>Total Resources: {{ resources|length }}</p>      
        {% for resource in resources %}
          <div class="user-row">
            <h3>{{ resource.title }}</h3>
            <p>{{ resource.id }}</p>
            {% if resource.url and resource.original_filename %}
              <a href="{{ resource.url }}" download="{{ resource.original_filename }}">
                Download {{ resource.original_filename }}
              </a>
            {% else %}
              <a href="{{ resource.url }}" target="_blank">Open Resource</a>
            {% endif %}

            <a href="/resources/edit-resource/{{ resource.id }}" ><button class="edit-btn">Edit</button></a>

            <form action="{{ url_for('delete-resource', resource_id=resource.id) }}" method="post" class="delete-form">
                <button type="submit" class="delete-btn" onclick="return confirm('Are you sure you want to delete this resource?');">Delete</button>
            </form>

          </div>

        {% endfor %}

      {% else %}
        <p>No resources found. Start by uploading a new resource!</p>
      {% endif %}

      <br><br><a href="/resources/upload" class="upload-link"><button class="edit-btn">Upload New Resource</button></a>
    </div>
  </div>

{% endblock %}