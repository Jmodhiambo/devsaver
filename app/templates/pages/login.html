{% extends "base.html" %}

{% block content %}
<div class="form-container">  
  {% if msg == "logged_out" %}
    <br><div class="alert">
      You have been logged out successfully.
    </div>
  {% endif %}

  {% if msg == "login_failed" %}
    <br><div class="alert alert-error">
      Login failed. Please check your username and password.
    </div>
  {% endif %}

  {% if msg == "registered" %}
    <br><div class="alert alert-success">
      Registration successful! Please log in.
    </div>
  {% endif %}

  {% if msg == "password_reset" %}
    <br><div class="alert alert-success">
        Password reset successful! Please log in.
    </div>
  {% endif %}
    
  {% if msg == "unauthorized" %}
    <br><div class="alert alert-error">
      You are not authorized to view this page.
    </div>
  {% endif %}

  <h1>Login to DevSaver</h1>

  <form method="post" action="/login">
    <div>
      <label for="username">Username</label><br>
      <input 
        type="text" 
        id="username" 
        name="username" 
        value="{{ data.username | default('') }}" 
        required
      >
      {% if errors.username %}
        <p class="error">{{ errors.username }}</p>
      {% endif %}
    </div>
    <br>

    <div>
      <label for="password">Password</label><br>
      <input 
        type="password" 
        id="password" 
        name="password" 
        required
      >
      {% if errors.password %}
        <p class="error">{{ errors.password }}</p>
      {% endif %}
    </div>
    <br>

    {% if errors.general %} <!-- General Errors -->
    <p class="error">{{ errors.general }}</p><br>
    {% endif %}

    <button type="submit">Login</button><br>
  </form>
  
  <p><a href="/forgot-password">Forgot Password?</a><p>
  <p>Don't have an account? <a href="/register">Register here.</a></p>
</div>
{% endblock %}