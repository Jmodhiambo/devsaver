{% extends "base.html" %}
{% block content %}
<div class="resource-view-container">

  <!-- Breadcrumb navigation -->
  <nav class="breadcrumb">
    <a href="/dashboard">Dashboard</a>
    {% if resource.type %}
      &nbsp;»&nbsp;
      <a href="/dashboard?filter={{ resource.type }}">{{ resource.type }}s</a>
    {% endif %}
    &nbsp;»&nbsp;
    <span>{{ resource.title }}</span>
  </nav>

  <p><strong>Type:</strong>
    <span class="view-span">{{ resource.type }}</span>
  </p><br>

  {% if resource.description %}
    <div>
      <p><strong>Description:</strong>
          <span class="view-span">{{ resource.description }}</span>
      </p>
    </div>
  {% endif %}

  <br>
  <div class="resource-display">
    {% if resource.type == 'Video' %}
      <video controls width="100%">
        <source src="{{ resource.url }}" type="video/mp4">
        Your browser does not support the video tag.
      </video>

    {% elif resource.type == 'Image' %}
      <img src="{{ resource.url }}" alt="{{ resource.title }}" style="max-width:100%; border-radius:8px;">

    {% elif resource.type == 'Audio' %}
      <audio controls>
        <source src="{{ resource.url }}" type="audio/mpeg">
        Your browser does not support the audio tag.
      </audio>

    {% elif resource.type == 'Link' %}
      <iframe src="{{ resource.url }}" style="width:100%; height:400px;" loading="lazy"></iframe>

    {% elif resource.type == 'File' %}
      <div class="file-box">
        <p><strong>File Name:</strong> {{ resource.original_filename }}</p>
        <a href="{{ resource.url }}" download>Download File</a>
      </div>

    {% else %}
      <p>No preview available for this resource type.</p>
    {% endif %}
  </div>

  {% if resource.tags %}
    <br><p><strong>Tags:</strong>
      {% for tag in resource.tags.split(',') %}
        <span class="tag">{{ tag }}</span>
      {% endfor %}
    </p>
  {% endif %}

  <div class="resource-actions">
    <a href="/resources/edit-resource/{{ resource.id }}" class="btn primary">Update</a>
    <a href="{{ resource.url }}" target="_blank" class="btn secondary">Open Resource</a>
  </div>

</div>
{% endblock %}